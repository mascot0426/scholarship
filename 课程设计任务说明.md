# 课程设计任务说明

## 一、设计任务说明

### 1.1 课程设计任务

#### 项目整体目标

本项目旨在开发一个**校园活动报名与签到管理系统**，为校园活动管理提供完整的数字化解决方案。系统支持多角色协同工作，实现活动发布、审批、报名、签到等全流程管理，并通过网络功能与校园平台进行数据同步，提高活动管理效率和学生参与体验。

#### 系统主要功能

1. **用户角色管理**
   - 支持三种角色：管理员（Admin）、发起人（Organizer）、学生（Student）
   - 用户注册、登录、身份认证功能
   - 基于角色的权限控制和界面展示

2. **活动管理**
   - 活动发布：发起人可创建活动并填写详细信息（标题、描述、类别、时间、地点、人数限制等）
   - 活动审批：管理员可审批待审批活动，批准或拒绝活动申请
   - 活动查看与搜索：支持按关键词搜索活动，查看活动详情
   - 活动状态管理：活动状态包括待审批、已批准、已拒绝、进行中、已结束

3. **报名管理**
   - 在线报名：学生可浏览已批准的活动并进行报名
   - 取消报名：学生可取消已报名的活动
   - 时间冲突检测：系统自动检测学生报名活动的时间冲突，提醒学生并允许选择是否继续报名
   - 候补排队机制：当活动报名人数已满时，新报名的学生自动加入候补列表；当有学生取消报名时，候补列表中的学生自动提升为正式报名
   - 报名列表查看：支持查看活动的报名名单和候补名单

4. **签到功能**
   - 学生签到：学生可对自己已报名的活动进行签到
   - 管理员签到：管理员/发起人可为学生执行签到操作
   - 签到列表查看：支持查看活动的签到记录
   - 签到统计：提供签到率等统计信息

5. **数据存储与管理**
   - 使用SQLite数据库存储用户、活动、报名、签到等数据
   - 数据完整性约束和索引优化
   - 支持数据查询、更新、删除等操作

6. **网络功能**
   - 从服务器获取活动类别列表
   - 从服务器获取公告信息
   - 活动批准后自动同步到校园平台
   - 支持手动同步活动到校园平台
   - 网络错误处理和容错机制

7. **数据导出**
   - CSV格式导出报名名单
   - CSV格式导出统计报表
   - 多线程后台导出，避免UI阻塞

#### 对本课程知识点的应用说明

1. **使用 Qt Widgets 完成界面设计**
   - 使用QMainWindow构建主窗口框架，包含菜单栏、状态栏、标签页等
   - 使用QDialog实现登录窗口、注册窗口等对话框
   - 使用QTableWidget、QLineEdit、QPushButton、QComboBox等控件构建交互界面
   - 使用QTabWidget实现多标签页管理，分离不同功能模块
   - 使用QStyleFactory设置应用程序样式，提升用户体验

2. **使用 Model/View 展示数据**
   - 使用QTableWidget作为视图组件展示活动列表、报名列表等数据
   - 通过QHash和QList等数据结构组织数据模型
   - 实现数据的增删改查操作，并实时更新视图显示
   - 支持数据筛选和搜索功能

3. **使用 SQLite 进行数据存储**
   - 使用Qt SQL模块（QSqlDatabase、QSqlQuery）连接和操作SQLite数据库
   - 设计并创建用户表、活动表、报名表、候补表等数据库表结构
   - 实现数据的持久化存储，包括用户信息、活动信息、报名记录、签到记录等
   - 使用事务处理保证数据一致性
   - 实现数据库初始化、表结构自动创建和升级功能

4. **使用 QThread 处理耗时任务**
   - 创建ExportThread类继承自QThread，实现多线程数据导出
   - 在后台线程中执行CSV文件写入操作，避免阻塞主UI线程
   - 使用信号和槽机制实现线程间通信，传递导出进度和完成状态
   - 创建ConflictChecker类用于后台冲突检测，提升响应速度

5. **使用 TCP/HTTP 完成网络通信**
   - 使用Qt Network模块（QNetworkAccessManager、QNetworkRequest、QNetworkReply）实现HTTP网络请求
   - 实现GET请求获取活动类别和公告信息
   - 实现POST请求同步活动信息到校园平台
   - 使用JSON格式（QJsonDocument、QJsonObject、QJsonArray）进行数据序列化和反序列化
   - 实现网络错误处理和超时机制，保证系统在网络异常情况下的稳定性

---

### 1.2 开发该系统软件环境及使用的技术说明

#### Qt 版本
- **Qt 5.12 或更高版本**（推荐 Qt 5.15 或 Qt 6.x）
  - 项目配置支持Qt 5.x和Qt 6.x，通过`greaterThan(QT_MAJOR_VERSION, 4)`自动判断版本

#### C++ 标准
- **C++11**
  - 项目配置文件（.pro）中明确指定`CONFIG += c++11`
  - 使用C++11特性如auto关键字、范围for循环、智能指针等

#### 使用的主要 Qt 模块

1. **Qt Core**
   - 提供Qt框架的核心功能，包括信号槽机制、对象模型、事件循环等基础功能

2. **Qt GUI**
   - 提供图形用户界面的基础类，包括窗口、控件、绘图等核心GUI功能

3. **Qt Widgets**
   - 提供丰富的桌面应用程序控件，包括窗口、按钮、表格、输入框等，用于构建完整的桌面应用界面

4. **Qt SQL**
   - 提供数据库访问功能，包括QSqlDatabase用于数据库连接、QSqlQuery用于执行SQL语句，实现SQLite数据库的增删改查操作

5. **Qt Network**
   - 提供网络通信功能，包括QNetworkAccessManager用于管理网络请求、QNetworkRequest和QNetworkReply用于HTTP通信，实现与服务器的数据交互

6. **Qt Concurrent / QThread**
   - QThread用于创建多线程，实现后台任务处理，避免阻塞UI线程，提升用户体验
   - ExportThread类继承QThread实现多线程数据导出功能

#### 编译环境
- **MSVC（Microsoft Visual C++）** 或 **MinGW（Minimalist GNU for Windows）**
  - Windows平台可使用Visual Studio的MSVC编译器或Qt自带的MinGW编译器
  - 通过Qt Creator配置相应的构建套件（Kit）进行编译

#### 其他技术
- **SQLite数据库**：轻量级嵌入式数据库，用于本地数据存储
- **JSON数据格式**：用于网络数据传输和解析
- **CSV文件格式**：用于数据导出功能

---

## 项目文件结构

```
exp_PesernoalWork/
├── exp_PesernoalWork.pro      # Qt项目配置文件
├── main.cpp                    # 程序入口
├── mainwindow.h/cpp            # 主窗口类
├── database.h/cpp              # 数据库管理类（SQLite操作）
├── loginwindow.h/cpp/ui        # 登录窗口
├── registerwindow.h/cpp/ui     # 注册窗口
├── activitymanager.h/cpp       # 活动管理模块
├── registrationmanager.h/cpp   # 报名管理模块
├── conflictchecker.h/cpp       # 冲突检查线程类
├── networkmanager.h/cpp        # 网络管理类（HTTP通信）
├── csvexporter.h/cpp           # CSV导出类
├── exportthread.h/cpp          # 多线程导出类
└── README.md                   # 项目说明文档
```



