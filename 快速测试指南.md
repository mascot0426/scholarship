# 多线程功能快速测试指南

## 一、快速测试 ConflictChecker

### 方法1：使用测试示例程序

1. **编译并运行测试程序**
   ```bash
   # 将 test_multithread_example.cpp 添加到项目中
   # 或直接运行该文件
   ```

2. **测试步骤**
   - 点击"测试 ConflictChecker"按钮
   - 观察日志输出
   - 在检查过程中点击"测试UI响应性"按钮
   - 验证UI是否保持响应

### 方法2：在现有程序中测试

1. **准备测试数据**
   - 登录系统（学生账号）
   - 报名一个活动（例如：2024-01-15 10:00-12:00）

2. **测试冲突检测**
   - 尝试报名另一个时间冲突的活动（例如：2024-01-15 11:00-13:00）
   - **验证点**：
     - 应该弹出冲突提示
     - UI在检查过程中应该保持响应
     - 可以继续操作其他功能

3. **测试无冲突情况**
   - 尝试报名一个时间不冲突的活动
   - **验证点**：
     - 应该直接允许报名
     - 不显示冲突提示

---

## 二、快速测试 ExportThread

### 方法1：使用测试示例程序

1. **运行测试程序**
   - 点击"测试 ExportThread"按钮
   - 选择保存位置
   - 观察进度条更新
   - 在导出过程中点击其他按钮测试UI响应性

2. **验证结果**
   - 检查导出的CSV文件是否存在
   - 打开文件验证内容是否正确
   - 验证进度条是否从0%更新到100%

### 方法2：在现有程序中测试

1. **测试导出报名名单**
   - 登录系统（管理员或发起人）
   - 进入"报名管理"标签页
   - 选择一个活动
   - 点击"导出报名名单"
   - **验证点**：
     - 文件应该成功生成
     - 导出过程中UI应该保持响应
     - 可以继续操作其他功能

2. **测试导出统计报表**
   - 以管理员身份登录
   - 点击菜单"文件" -> "导出统计报表"
   - 选择保存位置
   - **验证点**：
     - 导出应该成功完成
     - UI在导出过程中应该保持响应
     - 文件应该正确生成

---

## 三、UI响应性验证清单

在测试多线程功能时，重点验证以下UI响应性：

- [ ] **按钮点击**：在后台操作进行时，所有按钮应该立即响应
- [ ] **标签页切换**：可以自由切换标签页
- [ ] **列表滚动**：列表应该可以正常滚动
- [ ] **菜单操作**：菜单项应该可以正常点击
- [ ] **窗口拖动**：窗口应该可以正常拖动和调整大小
- [ ] **无卡顿**：界面不应该出现"未响应"状态

---

## 四、常见测试场景

### 场景1：大量数据导出
- **准备**：创建100+个活动，每个活动50+个报名
- **操作**：导出统计报表
- **验证**：导出过程中UI保持响应，导出完成后文件正确

### 场景2：并发操作
- **操作**：同时进行多个操作（如查看活动列表、导出数据等）
- **验证**：所有操作都能正常完成，无冲突

### 场景3：长时间运行
- **操作**：让系统长时间运行，进行多次导出和冲突检查
- **验证**：系统稳定，无内存泄漏

---

## 五、问题排查

### 问题1：UI仍然卡顿
**可能原因**：
- 线程没有正确启动
- 在UI线程中执行了耗时操作

**解决方法**：
- 检查线程是否正确调用 `start()`
- 确保耗时操作在 `run()` 方法中执行

### 问题2：信号没有触发
**可能原因**：
- 信号槽连接错误
- 线程提前结束

**解决方法**：
- 检查信号槽连接
- 使用 `QSignalSpy` 验证信号

### 问题3：导出文件格式错误
**可能原因**：
- CSV转义逻辑问题
- 编码问题

**解决方法**：
- 检查 `CsvExporter` 的转义逻辑
- 验证UTF-8 BOM是否正确写入

---

## 六、性能基准

### ConflictChecker
- **小数据量**（< 10个活动）：< 50ms
- **中等数据量**（10-100个活动）：< 200ms
- **大数据量**（> 100个活动）：< 1000ms

### ExportThread
- **小数据量**（< 100条记录）：< 1秒
- **中等数据量**（100-1000条记录）：< 5秒
- **大数据量**（> 1000条记录）：< 30秒

### UI响应延迟
- **线程启动延迟**：< 100ms
- **UI操作响应**：< 50ms

---

## 七、测试报告模板

```
测试日期：___________
测试人员：___________

### ConflictChecker 测试结果
- [ ] 无冲突检测：通过/失败
- [ ] 有冲突检测：通过/失败
- [ ] UI响应性：通过/失败
- [ ] 性能：通过/失败

### ExportThread 测试结果
- [ ] 报名名单导出：通过/失败
- [ ] 统计报表导出：通过/失败
- [ ] 进度显示：通过/失败
- [ ] UI响应性：通过/失败
- [ ] 文件格式：通过/失败

### 问题记录
1. 
2. 
3. 

### 备注
```

---

## 八、下一步

完成基本测试后，可以：
1. 运行完整的单元测试（参考 `多线程测试方案.md`）
2. 进行压力测试（大量数据）
3. 进行并发测试（多个线程同时运行）
4. 进行长时间稳定性测试





