# 在Qt Creator中使用测试程序

## 步骤1：打开测试项目

### 方法A：作为独立项目打开（推荐）

1. **打开Qt Creator**

2. **打开测试项目文件**
   - 点击菜单：`文件` → `打开文件或项目...`
   - 浏览到项目目录：`D:\QT_CONTENT\exp_PesernoalWork`
   - 选择文件：`test_multithread.pro`
   - 点击"打开"

3. **配置项目**
   - Qt Creator会提示配置项目
   - 选择你的Qt版本和构建套件（Kit）
   - 点击"配置项目"

### 方法B：在主项目中添加子项目

1. **打开主项目**
   - 打开 `exp_PesernoalWork.pro`

2. **添加子项目**
   - 在项目树中右键点击项目名称
   - 选择"添加子项目"
   - 选择 `test_multithread.pro`

## 步骤2：编译测试程序

1. **选择构建配置**
   - 在左下角选择构建配置（Debug或Release）

2. **构建项目**
   - 点击菜单：`构建` → `构建项目 "test_multithread"`
   - 或使用快捷键：`Ctrl+B`（Windows/Linux）或 `Cmd+B`（Mac）
   - 或点击左侧工具栏的"构建"按钮（锤子图标）

3. **检查编译结果**
   - 查看"编译输出"窗口
   - 确保没有错误（警告可以忽略）

## 步骤3：运行测试程序

1. **选择运行配置**
   - 在左下角选择运行配置
   - 确保选择的是 `test_multithread` 项目

2. **运行程序**
   - 点击菜单：`构建` → `运行`
   - 或使用快捷键：`Ctrl+R`（Windows/Linux）或 `Cmd+R`（Mac）
   - 或点击左侧工具栏的"运行"按钮（绿色三角形）

3. **测试程序界面**
   - 测试程序窗口会打开
   - 显示三个测试按钮：
     - "测试 ConflictChecker"
     - "测试 ExportThread"
     - "测试UI响应性（在后台操作时点击）"

## 步骤4：执行测试

### 测试 ConflictChecker

1. 点击"测试 ConflictChecker"按钮
2. 观察日志输出窗口
3. 在检查过程中点击"测试UI响应性"按钮，验证UI是否保持响应
4. 查看测试结果：
   - 应该检测到时间冲突
   - 线程启动时间应该 < 100ms
   - UI应该保持响应

### 测试 ExportThread

1. 点击"测试 ExportThread"按钮
2. 选择保存CSV文件的位置
3. 观察进度条更新
4. 在导出过程中点击其他按钮，验证UI响应性
5. 查看测试结果：
   - 导出应该成功完成
   - 文件应该正确生成
   - UI应该保持响应

## 步骤5：切换回主程序

如果需要运行主程序：

1. **打开主项目**
   - 文件 → 打开文件或项目
   - 选择 `exp_PesernoalWork.pro`

2. **或者使用多项目工作区**
   - 文件 → 新建文件或项目
   - 选择"其他项目" → "Qt Creator的通用项目"
   - 添加两个项目文件

## 常见问题

### Q1: 编译时找不到头文件

**解决方法：**
- 确保所有源文件都在同一目录下
- 检查 `.pro` 文件中的路径是否正确

### Q2: 链接错误

**解决方法：**
- 确保所有依赖的源文件都包含在 `SOURCES` 中
- 检查是否缺少某些库（如sql, network）

### Q3: 运行时数据库错误

**解决方法：**
- 测试程序会创建自己的数据库实例
- 确保有写入权限
- 数据库文件会创建在程序运行目录

### Q4: 如何同时运行主程序和测试程序

**解决方法：**
- 可以同时打开两个Qt Creator实例
- 或者先运行一个，再运行另一个（它们使用不同的数据库文件）

## 项目文件说明

- `test_multithread.pro` - 测试程序的项目配置文件
- `test_multithread_example.cpp` - 测试程序的源代码
- 其他 `.cpp` 和 `.h` 文件 - 共享的源文件（与主程序共用）

## 提示

- 测试程序与主程序完全独立，互不影响
- 测试程序会创建自己的数据库文件
- 可以随时修改测试代码，重新编译运行
- 建议在Debug模式下运行，方便调试

